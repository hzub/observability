<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/zenburn.css" />
    <link href="tailwind.css" rel="stylesheet" />
    <!-- <script src="plugin/highlight/highlight.js"></script> -->
  </head>
  <body>
    <div class="reveal">
      <!-- <div class="slides" data-load="slides_intro.html"></div> -->
      <!-- <div class="slides"></div> -->
      <div class="slides">
        <section>
          <strong class="text-orange-300">JS</strong> jak JavaScript,
          <strong class="text-blue-300">O</strong> jak Observability
          <p class="text-2xl">Hubert Zub, Future Conf 2023</p>
          <aside class="notes">
            <li>nazywam si Hubert</li>
            <li>dzikuj za zaproszenie Andrzejowi</li>
            <li>z Biaegostoku</li>
            <li>Jutro o AI, dzi o JS</li>
            <li>no wanie - AI przetwarza sporo danych...</li>
            <li>Bez tego 偶adna nowoczesna appka</li>
          </aside>
        </section>
        <section>
          <div>
            <p>Kto m贸wi?</p>
            <p class="fragment">Hubert</p>
            <ul class="fragment">
              <li>meet.js</li>
              <li><img width="40" height="40" src="logo.png" /> Databricks</li>
            </ul>
            <img src="download.jpeg" width="300" class="fragment" />
          </div>
          <aside class="notes">
            <li>data warehousy, lakes, przetwarzanie danych</li>
            <li>eksabajty danych</li>
            <li>
              databricks - mo偶liwe 偶e nie syszelicie, ale jestecie klientem
              firmy kt贸ra jest naszym klientem
            </li>
            <li>apple, adobe, cisco, hp, toyota, siemens</li>
          </aside>
        </section>
        <section>
          <section>
            <span style="opacity: 0.3"
              ><strong class="text-orange-300">JS</strong> jak JavaScript, </span
            ><strong class="text-blue-300">O</strong> jak Observability
            <aside class="notes">
              <li>teraz by wypadaa definicja</li>
              <li>wszyscy lubi definiowa</li>
              <li>i mog si o to bi (testy e2e, framework vs biblioteka)</li>
              <li>zdefiniujmy sami</li>
            </aside>
          </section>
          <section>
            Co musimy wiedzie o aplikacji na produkcji?
            <aside class="notes">
              <li>czy dziaa</li>
              <li>a co to znaczy</li>
              <li>偶e userzy mog klika w featury</li>
              <li>偶e te featury dziaaj</li>
              <li>偶e te featury dziaaj szybko</li>
              <li>偶e te featury s znajdowalne przez user贸w!</li>
            </aside>
          </section>
          <!-- <section>
            Czy to...
            <span class="r-stack">
              <span class="fragment fade-out" data-fragment-index="0"
                >zbieranie log贸w?</span
              >
              <span class="fragment current-visible" data-fragment-index="0"
                >statystyka bd贸w?</span
              >
              <span class="fragment">xxgz log贸w?</span>
            </span>
          </section> -->
          <section>
            A kto tego potrzebuje?
            <aside class="notes">
              <li>appka stoi, zrobiona, wypuszczona - kto potrzebuje</li>
              <li>
                czy my jako programici potrzebujemy zbierania du偶j iloci
                log贸w userzy korzystaj z apki
              </li>
              <li>
                my mo偶e nie, ale ci od produktu chc wiedzie czy mamy bdy w
                aplikacji
              </li>
              <li>albo czy aplikacja szybko dziaa</li>
              <li>albo czy featury kt贸re tworzymy w og贸le s wykorzystywane</li>
            </aside>
          </section>
          <section>
            <p>Czyli po pierwsze: <strong>bdy</strong></p>
            <aside class="notes">
              zrobilicie aplikacj, wiecie 偶e jest bez bd贸w bo przecie偶
              popisalicie testy, wysyacie na produkcj. Checie sysze o
              bdach? No nie. Ale wasz account ju偶 tak, bo jak bdy bd
              krytyczne to on wieci oczami.
            </aside>
          </section>
          <section>
            <p>Po drugie: <strong>performance</strong></p>
            <aside class="notes">
              jak pisalicie apk to przecie偶 migaa szybko. A nawet jak byo
              co wolno to zoptymalizowalicie. Przeskanowalicie web vitals,
              wszystko miga. To po co si tym przejmowa jak jest szybko. Jak
              co wolno to wiadomo 偶e to wina tych na backendzie. No ale
              tworzylicie appk na jakim macbooku kt贸ry ma 12 rdzeni i 32 gb
              ramu bo wam firma kupia. A user mo偶e mie biurowy komputer na
              przysowiowy wgiel. I p贸ki.
            </aside>
          </section>
          <section>
            <p>Po trzecie: <strong>analityka zdarze</strong></p>
            <aside class="notes">
              czy potrzebujecie tego? Przecie偶 UX/UI zaprojektowa, narysowa,
              frontend jest postawiony wg designu. Potrzebujecie wiedzie jak
              userzy klikaj w kt贸re przyciski etc.? Mo偶e tak, mo偶e nie, ale
              dzia produktowy potrzebuje wiedzie czy zaprojektowa interfejs
              kt贸ry jest jasny. M贸g zrobi testy UXowe z userami, ale to ma
              skala. I kosztuje.
            </aside>
          </section>
          <section>
            <p>
              Czemu te rzeczy <em><strong>obserwujemy</strong></em
              >?
            </p>
            <aside class="notes">
              <li>Czemu nie sprawdzimy tego wczeniej</li>
              <li>tylko teraz?</li>
              <li>
                observability pozwala nam robi (jedyne legalne) testy na
                produkcji - z DU呕 iloci user贸w
              </li>
              <li>zweryfikowa bdy</li>
            </aside>
          </section>
          <section>
            <p>Um贸wmy si  偶e observability to:</p>
            <ul>
              <li>Raportowanie bd贸w</li>
              <li>Metryki wydajnoci</li>
              <li>Analityka zdarze</li>
            </ul>
            <p class="fragment">...obserwowane na produkcji</p>
            <aside class="notes">
              <li>
                to jest robocza definicja na potrzeby prezentacji, wierz mocno
                偶e masa ludzi chciaaby to zdefiniowa inaczej - bardzo chtnie
                si o to podyskutuje ale po prezce :)
              </li>
            </aside>
          </section>

          <section>
            <p>Inglisz :</p>
            <ul>
              <li>error reporting</li>
              <li>performance metrics</li>
              <li>event analytics</li>
            </ul>
          </section>
          <section>
            O czym NIE jest ta prezentacja?
            <aside class="notes">
              <li>RAZ</li>
              <li>nie bdziemy omawia narzdzi - do tego s tutoriale</li>
              <li>lockrocket, datadog, sentry, grafana etc.</li>
              <li>
                mo偶e nawet na swoim backendzie macie customowe rozwizanie etc.
              </li>
              <li>
                nie m贸wi jak zestawi - ale jak dziaa na frontendzie, by te
                observability miao sens
              </li>
              <li>DWA</li>
              <li>nie bd wam m贸wi ze warto</li>
              <li>bo to troche jak prezka o tym 偶 warto pisa testy</li>
            </aside>
          </section>
          <section>
            <p>O czym jest ta prezentacja?</p>

            <aside class="notes">
              <li>dotkniemy ka偶dego tematu ze strony frontendu</li>
              <li>zwr贸ci uwag na uniwersalne praktyki, puapki etc</li>
              <li>pokaza ciekawostki</li>
              <li>JAK PISA APKI KTRE DA SI OBSERWOWA</li>
              <li>
                problem: ka偶dy z tych temat贸w to mo偶e by oddzielna prezka, no
                ale...
              </li>
            </aside>
          </section>

          <section>
            <ul>
              <li class="fragment">Raportowanie bd贸w</li>
              <li class="fragment">Metryki wydajnoci</li>
              <li class="fragment" style="opacity: 0.3">Analityka zdarze</li>
            </ul>
          </section>

          <!-- <section>
            <p>Wyobra偶amy sobie 偶e:</p>
            <ul>
              <li class="fragment">
                Posiadamy ju偶 zainstalowany i spity system do metryk
              </li>
              <li class="fragment">Chcemy by spenia swoj rol</li>
            </ul>
          </section> -->
        </section>

        <section data-background="#d57b7b">
          <section>
            <p>Cz I</p>
            <p><strong>Bdy</strong></p>
          </section>
          <section>
            <p>Potrzebujemy?</p>
            <aside class="notes">
              <li>
                Ju偶 rozmawialimy - wypuszczacie bezbdne aplikacje? JAk nie to
              </li>
              <li>
                Zakadamy 偶e mamy super CI wic 偶adne bdy czasu budowy:
                syntaxy etc. nie przejd wic interesuj nas tylko runtimey
              </li>
            </aside>
          </section>
          <section>
            <p>To co robimy z tymi bdami </p>
            <ol>
              <li class="fragment">Nic</li>
              <li class="fragment">adny modal + wylij prosz email</li>
              <li class="fragment">
                <strong>adny modal + automatyczne raportowanie</strong>
              </li>
            </ol>
            <aside class="notes">
              <li>BANA</li>
              <li>1: nic nie robimy</li>
              <li>2: wywietlamy adny modal + email</li>
              <li>3: automatyzujemy</li>
            </aside>
          </section>

          <section>
            <p>Przypominajka/wyjanienie</p>
            <img src="img/sch/error.png" />
          </section>
          <section>Efekt skali</section>
          <section>
            <p>Jak?</p>
            <ul>
              <li class="fragment">
                Z pomoc narzdzi: Sentry, LogRocket etc.
              </li>
              <li class="fragment">
                Po swojemu: wasny system do raportowania
              </li>
            </ul>
            <p class="fragment">
              Cel: statystyka, reprodukcja, zaraportowanie, naprawa
            </p>
            <aside class="notes">
              <li>BANA</li>
              <li>mo偶e tak</li>
              <li>a moze tak</li>
            </aside>
          </section>
          <section>
            <img src="img/tools/sentry.jpg" />
          </section>
        </section>

        <section data-background="#d57b7b">
          <section data-background="#d57b7b">
            <p>Puapki i praktyki</p>
          </section>
          <section>
            <p>Puapka #1</p>
            <p><strong>Logujemy za mao</strong></p>
            <aside class="notes">
              <li>BANA</li>
              <li>klasyk</li>
            </aside>
          </section>
          <section>
            <pre><code data-line-numbers="4-8|13-21|23-27|5-7|18-20" data-trim>class ApiService {
	async call() {
		const response = await fetch("...");
		if (!response.ok) {
			return Promise.reject(new Error(
        "Failed to fetch [URL]"
      ));
		}
		return response.json();
	}
}

function process() {
	new ApiService().call()
	  .then((data) => {
		  // ...
	  })
	  .catch((error) => {
		  // ?
	  });
}

document
	.querySelector("button")
	.addEventListener("click", () => {
		process();
	});
  </code></pre>
          </section>
          <section>
            <pre><code data-trim>
              .catch((error) => {
                console.log(error);
              });
			  </code></pre>
          </section>
          <section>
            <img src="img/bledy/1.png" width="100%"" />
            <p class="fragment">Z grubsza wszystko co wiemy 锔</p>
            <p class="fragment">Jaki ticket z tego wyjdzie?</p>
          </section>
          <section>
            <p>Co pomo偶e (atwe)?</p>
            <ul>
              <li class="fragment">Peny stack trace</li>

              <li class="fragment">URL / historia URLi (route-贸w)</li>

              <li class="fragment"><code>navigator.*</code></li>
            </ul>
          </section>
          <section>
            <p>Co jeszcze pomo偶e?</p>
            <ul>
              <li class="fragment">odbitka feature flag</li>
              <li class="fragment">ewaluacja A/B</li>
            </ul>
          </section>
        </section>
        <section data-background="#d57b7b">
          <section>
            <p>Stack trace</p>
          </section>
          <section>
            <pre><code data-line-numbers="1-11|13-21|23-27|5-7|18-20" data-trim>class ApiService {
  async call() {
    const response = await fetch("...");
    if (!response.ok) {
      return Promise.reject(new Error(
        "Failed to fetch [URL]"
      ));
    }
    return response.json();
  }
}

function process() {
  new ApiService().call()
    .then((data) => {
      // ...
    })
    .catch((error) => {
      console.log(error.stack)
    });
}</code></pre>
          </section>
          <section><img src="img/bledy/1.png" width="100%" /></section>
          <section>
            <pre><code data-line-numbers="2|3-6" data-trim>function process() {
  const initiatorStack = new Error().stack;
  new ApiService().call().catch((error) => {
    console.log(error.stack);
    console.log(initiatorStack);
  });
}

document.querySelector("button").addEventListener("click", () => {
  process();
});
</code></pre>
          </section>
          <section><img src="img/bledy/3.png" /></section>
          <section>
            <pre><code data-line-numbers="4-8" data-trim>function process() {
  const initiatorStack = new Error().stack;
  new ApiService().call().catch((error) => {
    const completeStack = [
      error.stack,
      ...initiatorStack.split("\n").slice(1),
    ].join("\n");
    console.log(completeStack);
  });
}</code></pre>
          </section>
          <section><img src="img/bledy/4.png" /></section>
          <section>
            Nie logujmy za mao...
            <aside class="notes"></aside>
          </section>
        </section>
        <section data-background="#d57b7b">
          <section>
            <p>Puapka #2</p>
            <p><strong>Logujemy za du偶o</strong></p>
            <aside class="notes">
              <li>mo偶na?</li>
            </aside>
          </section>
          <section>
            <img src="img/bledy/2.png" />
            <p class="fragment">Co tu jest nie tak?</p>
          </section>
          <section>
            <pre><code data-trim>{
  "exception": {
    "code": "403",
    "error": "Unauthorized"
  },
  "request": {
    "method": "POST",
    "resource": "/api/tables/1341",
    "body": {
      "operation": "register",
      "withToken": "NjEzMjMxNTg2MDM4NTAxMTY1MzA3MzM3MDYwNDQ3NzU1ODM2OTc5NDE0MjgxODM1"
    }
  }
}</code></pre>
          </section>
          <section>
            <p>Konstruujc bdy, raporty, logi:</p>
            <p class="fragment">锔</p>
            <aside class="notes">
              <li>Zwyczajowo wycinamy dane u偶ytkownika</li>
              <li>Wystarcz: identyfikatory, URLe, klucze</li>
              <li>Jak nie, to przemylmy architektur</li>
              <li>Z wyjtk贸w: wycinajmy tokeny, klucze, hasa etc.</li>
              <li>Im mniej danych u偶ytkownika tym lepiej</li>
              <li>A skoro o userze mowa</li>
            </aside>
          </section>
        </section>
        <section data-background="#d57b7b">
          <section>
            <p>Puapka #3</p>
            <p><strong>Brak informacji od u偶ytkownika</strong></p>
            <aside class="notes">
              <li>Pod spodem adnie wysya si bd</li>
              <li>A na wierzchu?</li>
            </aside>
          </section>
          <section><img src="img/bledy/5.png" width="100%" /></section>
          <section>
            <p>Cel?</p>
            <p class="fragment">Maksymalizacja reprodukowalnoci</p>
          </section>
          <section><img src="img/bledy/6.png" width="100%" /></section>
          <section>
            <h2>Obserwacja:</h2>
            <p>
              U偶ytkownicy czciej ni偶 nam si wydaje podaj dodatkowe dane.
            </p>
            <p>
              <strong>U偶ytkownicy paccy jeszcze czciej.</strong>
            </p>
          </section>
          <section>
            <p>Czy mo偶na lepiej?</p>
            <p class="fragment">A zrzut ekranu? </p>
          </section>
          <section>
            <pre><code data-trim data-line-numbers="|2-6|8-12|14-21">async function snapshot() {
  const stream = await navigator.mediaDevices
    .getDisplayMedia({
      preferCurrentTab: true,
    });
  const [track] = stream.getVideoTracks();

  const canvas = document.createElement("canvas");
  const video = document.createElement("video");
  video.srcObject = stream;

  await video.play();

  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  canvas.getContext("2d").drawImage(video, 0, 0);

  canvas.toBlob((blob) => {
    track.stop();
    // Przetworzenie + wysanie bloba
  });
}
</code></pre>
          </section>
          <section><img src="img/bledy/7.png" width="100%" /></section>
          <section>Z autopsji: 锔 mocno pomogo lokalizowa bdy</section>
        </section>
        <section data-background="#d57b7b">
          <section>
            <p>Puapka #4</p>
            <p><strong>Niesp贸jny system logowania</strong></p>
            <aside class="notes"></aside>
          </section>
          <section>
            <pre><code data-trim data-line-numbers="1-13|15-18|20-23|25-30">
class ErrorWrapper extends Error {
  constructor(
    private error: string,
    private errorCode: number,
    private stackTrace = new Error().stack
  ) {
    super(error);
  }
  serialize() {
    const { error, stackTrace, errorCode } = this;
    return { error, stackTrace, errorCode };
  }
}

function doSomething1() {
  // ...
  throw new ErrorWrapper("Unauthorized", 401);
}

function doSomething2() {
  // ...
  throw { code: 401, message: "Unauthorized" };
}

function doSomething3() {
  // ...
  throw new Error(JSON.stringify(
    { code: 401, message: "Unauthorized" }
  ));
}

            </code></pre>
          </section>
        </section>
        <section data-background="#d57b7b">
          <section>
            <p>Puapka #5</p>
            <p><strong>Testowanie raportowania</strong></p>
          </section>
          <section>
            <center>
              <img src="img/tools/mem.jpg" />
            </center>
            <aside class="notes">
              <li>odpalacie system, stawiacie sentry czy co tam</li>
              <li>i nie ma bd贸w</li>
              <li>...i nie ma bd贸w</li>
              <li>to dobrze, prawda?</li>
              <li>warto napisa test kt贸ry zmockowane</li>
            </aside>
          </section>
          <section>
            <h1>ジ</h1>
            <aside class="notes">
              <li>
                a bardziej warto napisa e2e kt贸ry bdzie siedzia w waszym CI i
                raz na miesic faktycznie wysypie stron i zgosi faktyczny
                raport
              </li>
            </aside>
          </section>
        </section>

        <section data-background="#d57b7b">
          <p>Podsumowanie czci o bdach</p>
          <ul>
            <li class="fragment">Minimum do reprodukcji</li>
            <li class="fragment">Uwa偶ajmy co raportujemy</li>
            <li class="fragment">Pene zrzuty stos贸w</li>
            <li class="fragment">Sp贸jna forma</li>
            <li class="fragment">Testujmy!</li>
          </ul>
        </section>
        <section data-background="#3c3355">
          <section>
            <p>Cz II</p>
            <p><strong>Wydajno</strong></p>
          </section>
          <section>
            <p>Dlaczego?</p>
            <aside class="notes">
              <li>Znowu - problem macbooka programisty</li>
              <li>
                Celem jest by appka bya szybka/u偶ywalna przez wszystkich na
                wikszoci maszyn
              </li>
              <li>(chyba 偶e nie, ale to dziwny model biznesowy)</li>
            </aside>
          </section>
          <section>
            <p><em>"Czy aplikacja jest wystarczajco szybka"</em></p>
            <p class="fragment">Jak na to odpowiedzie?</p>
          </section>
          <section>
            <p>Mo偶emy zmierzy:</p>
            <ul>
              <li class="fragment">
                Czas renderu ekran贸w (poszczeg贸lnych czci)
              </li>
              <li class="fragment">Wskie garda, blokujce taski</li>
              <li class="fragment">Wielko pobieranych danych</li>
              <li class="fragment">Chrome Lighthouse</li>
              <li class="fragment">...</li>
            </ul>
          </section>
          <section>
            Czy to odpowiada na pytanie?
            <aside class="notes">
              <li>Mo偶e odpowiada, ale nie u偶ywamy wtedy wcale observability</li>
            </aside>
          </section>
        </section>
        <section data-background="#3c3355">
          <section>
            <p>Puapka #1</p>
            <p>
              <strong>Mierzymy tylko szczeg贸y</strong>
            </p>
          </section>

          <section>
            <p>Co tak naprawd nas interesuje?</p>
            <p class="fragment">A gdyby tak E2E?</p>
            <aside class="notes">
              <li>Co tak naprawd nas interesuje?</li>
              <li>
                MO呕EMY Czas respons贸w z API. Wiecie, jak za dugie to problem bo
                te偶 apka wolno dziaa. Ale to problem backendu, infry od
                networku, chmurowc贸w - ka偶dy zmierzy po swojemu.
              </li>
              <li>MO呕EMY czas ekran贸w</li>
              <li>MO呕EMY zasoby</li>
              <li>
                Ale my na frontendzie mamy wyjtkow, w zasadzie najlepsz
                pozycj do mierzenia
              </li>
              <li>JAKI INNY AKTOR potrafi zebrta tak dane</li>
            </aside>
          </section>
          <section>
            <center><img src="img/sch/perf.png" /></center>
            <aside class="notes">
              <li>Start jakiej akcji (INTERAKCJI) - nawigacja, klik etc</li>
              <li>Cosi dzieje.</li>
              <li>Mo偶e to by adowanie strony</li>
              <li>Mo偶e to by adowanie kolejnej strony czyli nawigacja</li>
              <li>
                Mo偶e to by akcja kt贸ra odzywa si do API i co przetwarza
              </li>
              <li>Co interesuje user贸w? Kiedy mog robidalej</li>
            </aside>
          </section>
          <section>
            <ul>
              <li>
                Start:<br />
                <strong
                  >otwarcie aplikacji, nawigacja, akcja u偶ytkownika</strong
                >
              </li>
              <br />
              <li>Koniec:<br /><strong>interaktywno?</strong></li>
            </ul>
          </section>
          <section>I to mo偶na mierzy</section>
          <section>
            <p>Jak mo偶na dziaa:</p>
            <ul>
              <li class="fragment">
                Zdefiniowanie/nazwanie ka偶dej interakcji (scenariusza, UJ, ...)
              </li>
              <li class="fragment">Raportowanie penego czasu interakcji</li>
              <li class="fragment">Od interaktywnoci do interaktywnoci</li>
              <li class="fragment">+ dopenienie suchymi danymi</li>
            </ul>
          </section>
          <section>
            <p>Pomysy na implementacj?</p>
            <ul>
              <li class="fragment">
                Rozpoczynanie interakcji przy nawigacji (nasuch na routerze)
              </li>
              <li class="fragment">
                Rozpoczynanie interakcji na 偶danie (zdarzenie na elemencie)
              </li>
              <li class="fragment">Zale偶nie od frameworka</li>
            </ul>
          </section>

          <section>
            <pre><code data-line-numbers="|2-5"><script type="text/template">const Routes = () => {
  useEffect(() => {
    const interaction = getInteraction(location.path);
    startInteraction(location.path);
  }, [location])
  
  return (
    <Switch>
      <Route path="/tables" element={...} />
      <Route path="/users" element={...} />
    </Switch>
  );
}

</script></code></pre>
          </section>
          <section>
            <pre><code data-line-numbers="|2-5,10"><script type="text/template">const View = () => {
  const loadUsers = useCallback(() => {
    startInteraction('LOADING_USERS');
    fetchUsersFromApi(...);
  }, [])
  
  return (
    <div>
      {/* ... */}
      <button onClick={loadUsers}>Load</button>
    </div>
  );
}

</script></code></pre>
          </section>

          <section>
            <pre><code data-line-numbers="|9-14"><script type="text/template">const View = () => {
  const [loading, setLoading] = useState(true);
  const [data, setData] = useState(null);
  
  useEffect(... => ...)
  
  return (
    <div>
      <InteractionBlock
        name="PAGE_CLIENTS_TABLE_VIEW" 
        isBlocked={loading}
      >
        {loading ? <Spinner /> : data.map(... => ...)}
      </Interation>
    </div>
  );
}

</script></code></pre>
          </section>

          <section>
            <pre><code data-line-numbers="10-14"><script type="text/template"><div class="feed-toggle">
  <ul class="nav nav-pills outline-active">
    
    <li [hidden]="!listConfig.filters.tag">
      <a class="nav-link active">
        {{ listConfig.filters.tag }}
      </a>
    </li>
  </ul>
  <interaction-pending
    name="CLIENT_TABLE_LOADING"
    [loading]="loading"
  >
  </interaction-pending>
</div></script></code></pre>
          </section>

          <section>
            <p>A kiedy skoczy i zaraportowa?</p>
            <p class="fragment">Podpowied藕: interaktywno</p>
          </section>
          <section>
            <h1></h1>
          </section>
          <section>
            <pre><code><script type="text/template">requestAnimationFrame(() => {
  // Odblokowanie
});</script></code></pre>
          </section>
          <section>
            <pre><code><script type="text/template">requestAnimationFrame(() => {
  requestAnimationFrame(() => {
    // Odblokowanie
  });
});</script></code></pre>
            <aside class="notes">
              <li>
                pierwszy rAF moze jeszcze wykonac si w tej samej ramce
                wykonania
              </li>
              <li>zagnie偶d偶ony bdzie na bank w kolejnej</li>
            </aside>
          </section>
          <section>
            <center><img src="img/sch/perf.png" /></center>
            <aside class="notes">
              <li>Z autopsji: 锔 dziaa cakiem nie藕le</li>
            </aside>
          </section>
        </section>
        <section data-background="#3c3355">
          <section>
            <p>A co ze szczeg贸ami?</p>
            <ul>
              <li class="fragment">Wskie garda</li>
              <li class="fragment">Ilo zasob贸w</li>
            </ul>
          </section>
          <section>
            <p>Wskie garda</p>
            <ul>
              <li class="fragment">Mo偶emy duba rcznie</li>
              <li class="fragment">...PerformanceObserver API</li>
            </ul>
          </section>
          <section>
            <pre><code data-line-numbers>const observer = new PerformanceObserver((list) => {
  console.log(list.getEntries()[0]);
});

observer.observe({
  type: "longtask",
});
            </code></pre>
          </section>
          <section>
            <pre><code data-trim data-line-numbers="|1-3|5-11|13-19"><script type="text/template">
<body>
  <div>test</div>
</body>

const observer = new PerformanceObserver((list) => {
  console.log(list.getEntries()[0]);
});

observer.observe({
  type: "longtask",
});

setTimeout(() => {
  for (let i = 0; i < 500; i++) {
    for (let j = 0; j < 500; j++) {
      document.querySelector("div").innerHTML = "x";
    }
  }
}, 1000);
            </script></code></pre>
          </section>
          <section>
            <img src="img/perf/1.png" width="100%" />
          </section>
          <section>
            <pre><code data-trim data-line-numbers="7-16|14"><script type="text/template">
const observer = new PerformanceObserver((list) => {
  for (const item of list.getEntries()) {
    console.log(item);
  }
});

observer.observe({
  entryTypes: [
    "mark",
    "measure",
    "longtask",
    "paint",
    "navigation",
    "resource",
  ],
});
            </script></code></pre>
          </section>
          <section>
            <img src="img/perf/2.png" width="100%" />
          </section>
          <section>
            <img src="img/perf/3.png" width="100%" />
          </section>
        </section>
        <section data-background="#3c3355">
          <section>
            <p>Puapka #2</p>
            <p><strong>Pomiar wpywa na pomiar</strong></p>
          </section>
          <section>
            <p>TODO: Przykad</p>
          </section>
          <section>
            <div>Rozwizanie</div>
            <ul>
              <li>Kolejkowanie</li>
              <li>Sampling</li>
            </ul>
          </section>
        </section>
        <!-- <section data-background="#3c3355">
          <section>
            <p>Puapka #3</p>
            <p><strong>Kiepsko nazwane interakcje/scenariusze</strong></p>
          </section>
          <section>[SCREEN - "page load time"]</section>
        </section> -->

        <section data-background="#3c3355">
          <p>Podsumowanie czci wydajnoci</p>
          <ul>
            <li class="fragment">Pomiary E2E</li>
            <li class="fragment">Organizacja interakcji</li>
            <li class="fragment">PerformanceObserver</li>
          </ul>
        </section>
        <section data-background="#185642">
          <p>Cz #3: Analityka</p>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
